{"version":3,"file":"DevicePostureContext.js","sourceRoot":"","sources":["../../src/context/DevicePostureContext.tsx"],"names":[],"mappings":"AAAA,OAAO,KAAK,EAAE,EACZ,aAAa,EACb,UAAU,EACV,SAAS,EACT,OAAO,EACP,QAAQ,GACT,MAAM,OAAO,CAAC;AAEf,OAAO,mBAAmB,MAAM,wBAAwB,CAAC;AAOzD,MAAM,CAAC,MAAM,kBAAkB,GAAoC;IACjE,OAAO,EAAE,SAAS;CACnB,CAAC;AAEF,MAAM,oBAAoB,GAAG,aAAa,CACxC,kBAAkB,CAAC,OAAO,CAC3B,CAAC;AAMF,MAAM,CAAC,MAAM,qBAAqB,GAAyC,CAAC,EAC1E,QAAQ,GACT,EAAE,EAAE;IACH,MAAM,CAAC,OAAO,EAAE,UAAU,CAAC,GAAG,QAAQ,CACpC,kBAAkB,CAAC,OAAO,CAC3B,CAAC;IAEF,SAAS,CAAC,GAAG,EAAE;QACb,kBAAkB,CAAC,OAAO,GAAG,OAAO,CAAC;IACvC,CAAC,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC;IAEd,SAAS,CAAC,GAAG,EAAE;QACb,MAAM,mBAAmB,GAA0B,CAAC,WAAW,EAAE,EAAE;YACjE,kBAAkB,CAAC,OAAO,GAAG,WAAW,CAAC,OAAO,CAAC;YACjD,UAAU,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC;QAClC,CAAC,CAAC;QAEF,MAAM,YAAY,GAAG,mBAAmB,CAAC,WAAW,CAClD,uBAAuB,EACvB,mBAAmB,CACpB,CAAC;QAEF,OAAO,GAAG,EAAE;YACV,YAAY,CAAC,MAAM,EAAE,EAAE,CAAC;QAC1B,CAAC,CAAC;IACJ,CAAC,EAAE,EAAE,CAAC,CAAC;IAEP,MAAM,KAAK,GAAG,OAAO,CAAC,GAAG,EAAE,CAAC,OAAO,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC;IAEhD,OAAO,CACL,CAAC,oBAAoB,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,KAAK,CAAC,CAC1C;MAAA,CAAC,QAAQ,CACX;IAAA,EAAE,oBAAoB,CAAC,QAAQ,CAAC,CACjC,CAAC;AACJ,CAAC,CAAC;AAEF,MAAM,CAAC,MAAM,gBAAgB,GAAG,GAAuB,EAAE;IACvD,OAAO,UAAU,CAAC,oBAAoB,CAAC,CAAC;AAC1C,CAAC,CAAC","sourcesContent":["import React, {\n  createContext,\n  useContext,\n  useEffect,\n  useMemo,\n  useState,\n} from \"react\";\n\nimport DevicePostureModule from \"../DevicePostureModule\";\nimport type { DevicePostureModuleEvents } from \"../DevicePosture.types\";\n\ntype DevicePostureListener = DevicePostureModuleEvents[\"onDevicePostureChange\"];\ntype DevicePostureChangeEvent = Parameters<DevicePostureListener>[0];\ntype DevicePostureValue = DevicePostureChangeEvent[\"posture\"];\n\nexport const devicePostureState: { current: DevicePostureValue } = {\n  current: \"unknown\",\n};\n\nconst DevicePostureContext = createContext<DevicePostureValue>(\n  devicePostureState.current\n);\n\ntype DevicePostureProviderProps = {\n  children?: React.ReactNode;\n};\n\nexport const DevicePostureProvider: React.FC<DevicePostureProviderProps> = ({\n  children,\n}) => {\n  const [posture, setPosture] = useState<DevicePostureValue>(\n    devicePostureState.current\n  );\n\n  useEffect(() => {\n    devicePostureState.current = posture;\n  }, [posture]);\n\n  useEffect(() => {\n    const handlePostureChange: DevicePostureListener = (nextPosture) => {\n      devicePostureState.current = nextPosture.posture;\n      setPosture(nextPosture.posture);\n    };\n\n    const subscription = DevicePostureModule.addListener(\n      \"onDevicePostureChange\",\n      handlePostureChange\n    );\n\n    return () => {\n      subscription.remove?.();\n    };\n  }, []);\n\n  const value = useMemo(() => posture, [posture]);\n\n  return (\n    <DevicePostureContext.Provider value={value}>\n      {children}\n    </DevicePostureContext.Provider>\n  );\n};\n\nexport const useDevicePosture = (): DevicePostureValue => {\n  return useContext(DevicePostureContext);\n};\n"]}